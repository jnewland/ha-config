# If Katie and I are both in the kitchen for a few minutes, set the mode to
# Cooking
alias: Cooking
trigger:
  platform: state
  entity_id:
    - device_tracker.jphone_jphone
    - device_tracker.kphone_kphone
  to: kitchen
  for:
    minutes: 2
condition:
  condition: and
  conditions:
  - condition: template
    value_template: '
      {% set jphone = states.device_tracker.jphone_jphone.state %}
      {% set kphone = states.device_tracker.kphone_kphone.state %}
      {{
        (jphone == kphone or (jnewland == "not_home" or kphone == "not_home")) and
        states.input_select.mode.state != "Pause" and
        states.input_boolean.guests.state == "off" and
        states.input_select.mode.state != "Cooking"
      }}'
action:
  - service: script.turn_on
    entity_id: script.mode_cooking
