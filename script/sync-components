#!/bin/bash

set -ex

: ${TMPDIR:=$(mktemp -d)}

# renovate: datasource=github-releases depName=sebr/bhyve-home-assistant
BHYVE_VERSION=3.0.0
git clone --depth 1 --branch $BHYVE_VERSION https://github.com/sebr/bhyve-home-assistant $TMPDIR/$$-bhyve-home-assistant
rm -rf custom_components/bhyve || true
mv $TMPDIR/$$-bhyve-home-assistant/python_scripts/*.py python_scripts/
mv $TMPDIR/$$-bhyve-home-assistant/custom_components/bhyve custom_components
sync

git clone https://github.com/GoPosi/homeassistant-aerogarden $TMPDIR/$$-homeassistant-aerogarden
rm -rf custom_components/aerogarden || true
mv $TMPDIR/$$-homeassistant-aerogarden/custom_components/aerogarden custom_components
sync

git clone https://github.com/Olen/homeassistant-plant $TMPDIR/$$-homeassistant-plant
rm -rf custom_components/plant || true
mv $TMPDIR/$$-homeassistant-plant/custom_components/plant custom_components
sync

# renovate: datasource=github-releases depName=uvjustin/alarmdotcom
ALARM_DOT_COM_VERSION=v0.2.15
git clone --depth 1 --branch $ALARM_DOT_COM_VERSION https://github.com/uvjustin/alarmdotcom $TMPDIR/$$-alarmdotcom
rm -rf custom_components/alarmdotcom || true
mv $TMPDIR/$$-alarmdotcom/custom_components/alarmdotcom custom_components
sync

# renovate: datasource=github-releases depName=blakeblackshear/frigate-hass-integration
FRIGATE_VERSION=v2.3
git clone --depth 1 --branch $FRIGATE_VERSION https://github.com/blakeblackshear/frigate-hass-integration $TMPDIR/$$-frigate
rm -rf custom_components/frigate || true
mv $TMPDIR/$$-frigate/custom_components/frigate custom_components
sync

curl -L -o www/group-card.js https://raw.githubusercontent.com/custom-cards/group-card/0.0.6/group-card.js
curl -L -o www/auto-entities.js https://raw.githubusercontent.com/thomasloven/lovelace-auto-entities/1.11.0/auto-entities.js
curl -L -o www/mini-media-player-bundle.js https://github.com/kalkih/mini-media-player/releases/download/v1.16.4/mini-media-player-bundle.js
curl -L -o www/custom-sonos-card.js https://github.com/johanfrick/custom-sonos-card/releases/download/v5.8.0/custom-sonos-card.js
curl -L -o www/mini-graph-card-bundle.js https://github.com/kalkih/mini-graph-card/releases/download/v0.11.0/mini-graph-card-bundle.js

git add custom_components
git add python_scripts
git add www

rm -rf $TMPDIR/$$-*
